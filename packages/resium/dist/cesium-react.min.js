!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("cesium"),require("prop-types"),require("react")):"function"==typeof define&&define.amd?define(["exports","cesium","prop-types","react"],t):t(e.CesiumReact={},e.Cesium,e.PropTypes,e.React)}(this,function(e,t,n,i){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i;var c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e};"object"==typeof Reflect&&Reflect.construct;function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=n.instanceOf(t.Camera),p=n.instanceOf(t.CesiumWidget),m=n.instanceOf(t.EntityCollection),y=n.instanceOf(t.PointPrimitiveCollection),d=n.instanceOf(t.PrimitiveCollection),h=n.instanceOf(t.Scene),f=n.instanceOf(t.Viewer),v=Object.freeze({cameraType:u,cesiumWidgetType:p,entityCollectionType:m,pointPrimitiveCollectionType:y,primitiveCollectionType:d,sceneType:h,viewerType:f}),C=function(e,t){Object.entries(t).forEach(function(t){var n=t[0],i=t[1];"function"==typeof i&&e[n].addEventListener(i)})},g=function(e,t){Object.entries(t).forEach(function(t){var n=t[0],i=t[1];"function"==typeof i&&e[n].removeEventListener(i)})},E=/^on([A-Z])/,P=function(e,t){return Object.keys(t).reduce(function(n,i){if(!E.test(i)||"function"!=typeof t[i])return n;var o=i.replace(E,function(e,t){return t.toLowerCase()});return e.indexOf(o)>=0&&(n[o]=t[i]),n},{})},w=function(e){function t(){for(var t,n,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=n=e.call.apply(e,[this].concat(o))||this,n.cesiumElement=null,t||l(n)}a(t,e);var n=t.prototype;return n.componentWillMount=function(){this.createCesiumElement&&!this.constructor.initCesiumComponentWhenComponentDidMount&&(this.cesiumElement=this.createCesiumElement(this.getPropsForCesium()),this.cesiumElement&&C(this.cesiumElement,P(this.getCesiumEvents(),this.props)))},n.componentDidMount=function(){this.createCesiumElement&&this.constructor.initCesiumComponentWhenComponentDidMount&&(this.cesiumElement=this.createCesiumElement(this.getPropsForCesium()),this.cesiumElement&&C(this.cesiumElement,P(this.getCesiumEvents(),this.props))),this.mountCesiumElement&&this.mountCesiumElement(this.cesiumElement),this.props.onMount&&this.onMount(this.cesiumElement)},n.componentDidUpdate=function(e){var t,n,i,o,r,s,a,c=this.cesiumElement;if(c){var l=this.getCesiumEvents();t=c,n=P(l,e),i=P(l,this.props),o=Object.keys(n),r=Object.keys(i),s=o.map(function(e){return[e,n[e]]}).reduce(function(e,t){var n=t[0],o=t[1];return-1!==r.indexOf(n)&&o===i[n]&&"function"==typeof o||(e[n]=o),e},{}),a=r.map(function(e){return[e,i[e]]}).reduce(function(e,t){var i=t[0],r=t[1];return-1!==o.indexOf(i)&&r===n[i]||"function"!=typeof r||(e[i]=r),e},{}),g(t,s),C(t,a)}var u=this.props;this.getCesiumProps().filter(function(t){return e[t]!==u[t]}).forEach(function(e){c[e]=u[e]}),this.updateCesiumElement&&this.updateCesiumElement(c,e);var p=this.props.onUpdate;p&&p(c,e)},n.componentWillUnmount=function(){var e=this.cesiumElement,t=this.props.onUnmount;t&&t(e),e&&g(e,P(this.getCesiumEvents(),this.props)),this.destroyCesiumElement&&this.destroyCesiumElement(e),this.cesiumElement=null},n.getCesiumEvents=function(){return this.constructor.cesiumEvents||[]},n.getCesiumProps=function(){return this.constructor.cesiumProps||[]},n.getCesiumReadOnlyProps=function(){return this.constructor.cesiumReadOnlyProps||[]},n.getPropsForCesium=function(){var e=this;return this.getCesiumProps().concat(this.getCesiumReadOnlyProps()).reduce(function(t,n){var i;return void 0===e.props[n]?t:s({},t,((i={})[n]=e.props[n],i))},{})},n.render=function(){return null},t}(i.PureComponent);w.propTypes={onMount:n.func,onUnmount:n.func,onUpdate:n.func};var b=function(e){function n(){return e.apply(this,arguments)||this}a(n,e);var i=n.prototype;return i.createCesiumElement=function(e){return new t.Entity(e)},i.mountCesiumElement=function(e){this.parent.add(e)},i.destroyCesiumElement=function(e){var t=this.parent;t&&t.remove(e)},r(n,[{key:"parent",get:function(){var e=this.context,t=e.entityCollection,n=e.viewer;return t&&!t.isDestroyed()?t:n&&!n.isDestroyed()?n.entities:null}}]),n}(w);b.propTypes=s({},w.propTypes,{availability:n.any,billboard:n.any,box:n.any,corridor:n.any,cylinder:n.any,description:n.any,ellipse:n.any,ellipsoid:n.any,id:n.string,label:n.any,model:n.any,name:n.any,onDefinitionChanged:n.func,orientation:n.any,parent:n.any,path:n.any,plane:n.any,point:n.any,polygon:n.any,polyline:n.any,polylineVolume:n.any,position:n.any,properties:n.any,rectangle:n.any,show:n.any,viewFrom:n.any,wall:n.any}),b.contextTypes={entityCollection:m,viewer:f},b.cesiumProps=["availability","show","description","position","orientation","viewFrom","parent","billboard","box","corridor","cylinder","ellipse","ellipsoid","label","model","name","path","plane","point","polygon","polyline","properties","polylineVolume","rectangle","wall"],b.cesiumReadOnlyProps=["id"],b.cesiumEvents=["definitionChanged"];var O=function(e){function t(){for(var t,n,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=n=e.call.apply(e,[this].concat(o))||this,n.initialOptions=null,t||l(n)}a(t,e);var n=t.prototype;return n.createCesiumElement=function(e){return this.initialOptions=e,null},n.mountCesiumElement=function(){this.cesiumElement=this.parent.add(this.initialOptions)},n.destroyCesiumElement=function(e){var t=this.parent;t&&!t.isDestroyed()&&e&&t.remove(e),this.initialOptions=null},r(t,[{key:"parent",get:function(){var e=this.context.pointPrimitiveCollection;return e&&!e.isDestroyed()?e:null}}]),t}(w);O.propTypes=s({},w.propTypes,{color:n.any,disableDepthTestDistance:n.number,distanceDisplayCondition:n.any,id:n.any,outlineColor:n.any,outlineWidth:n.number,pixelSize:n.number,position:n.any,scaleByDistance:n.any,show:n.bool,translucencyByDistance:n.any}),O.contextTypes={pointPrimitiveCollection:y},O.cesiumProps=["color","disableDepthTestDistance","distanceDisplayCondition","id","outlineColor","outlineWidth","pixelSize","position","scaleByDistance","show","translucencyByDistance"],O.cesiumReadOnlyProps=[],O.cesiumEvents=[];var D=function(e){function n(){for(var t,n,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=n=e.call.apply(e,[this].concat(o))||this,n.state={mounted:!1},t||l(n)}a(n,e);var i=n.prototype;return i.getChildContext=function(){return{pointPrimitiveCollection:this.cesiumElement}},i.createCesiumElement=function(e){return new t.PointPrimitiveCollection(e)},i.mountCesiumElement=function(e){this.parent.add(e),this.setState({mounted:!0})},i.destroyCesiumElement=function(e){var t=this.parent;t&&!t.isDestroyed()&&t.remove(e),e.isDestroyed()||e.destroy()},i.render=function(){var e=this.props.children;return this.state.mounted?e:null},r(n,[{key:"parent",get:function(){var e=this.context,t=e.premitiveCollection,n=e.scene,i=e.viewer;return t&&!t.isDestroyed()?t:n&&!n.isDestroyed()?n.primitives:i&&!i.isDestroyed()?i.scene.primitives:null}}]),n}(w);D.propTypes=s({},w.propTypes,{blendOption:n.any,children:n.any,debugShowBoundingVolume:n.bool,modelMatrix:n.any}),D.contextTypes={primitiveCollection:d,scene:h,viewer:f},D.childContextTypes={pointPrimitiveCollection:y},D.cesiumProps=["blendOption","debugShowBoundingVolume","modelMatrix"],D.cesiumReadOnlyProps=[],D.cesiumEvents=[];var T=function(e){function n(){return e.apply(this,arguments)||this}a(n,e);var i=n.prototype;return i.createCesiumElement=function(e){return new t.Primitive(e)},i.mountCesiumElement=function(e){this.parent.add(e)},i.destroyCesiumElement=function(e){var t=this.parent;t&&t.remove(e)},r(n,[{key:"parent",get:function(){var e=this.context,t=e.premitiveCollection,n=e.scene,i=e.viewer;return t&&!t.isDestroyed()?t:n&&!n.isDestroyed()?n.primitives:i&&!i.isDestroyed()?i.scene.primitives:null}}]),n}(w);T.propTypes=s({},w.propTypes,{allowPicking:n.any,appearance:n.any,asynchronous:n.bool,compressVertices:n.bool,cull:n.bool,debugShowBoundingVolume:n.bool,depthFailAppearance:n.any,geometryInstances:n.any,interleave:n.bool,modelMatrix:n.any,releaseGeometryInstances:n.bool,shadows:n.any,show:n.bool}),T.contextTypes={primitiveCollection:d,scene:h,viewer:f},T.cesiumProps=["allowPicking","appearance","cull","debugShowBoundingVolume","depthFailAppearance","modelMatrix","shadows","show"],T.cesiumReadOnlyProps=["asynchronous","compressVertices","geometryInstances","interleave","releaseGeometryInstances"],T.cesiumEvents=[];var x=function(e){function n(){for(var t,n,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=n=e.call.apply(e,[this].concat(o))||this,n.element=null,t||l(n)}a(n,e);var o=n.prototype;return o.getChildContext=function(){return{cesiumWidget:this.cesiumElement?this.cesiumElement.cesiumWidget:null,scene:this.cesiumElement?this.cesiumElement.scene:null,viewer:this.cesiumElement}},o.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.forceUpdate()},o.createCesiumElement=function(e){return this.element?new t.Viewer(this.element,e):null},o.destroyCesiumElement=function(e){e.destroy(),this.element=null},o.render=function(){var e=this,t=this.props,n=t.children,o=t.containerProps,r=t.className,a=t.full,c=t.id,l=t.style;return i.createElement("div",s({className:r,id:c,ref:function(t){e.element=t},style:s({},a?{position:"absolute",bottom:"0",left:"0",right:"0",top:"0"}:{},l)},o),this.cesiumElement?n:null)},n}(w);x.propTypes=s({},w.propTypes,{animation:n.any,automaticallyTrackDataSourceClocks:n.any,baseLayerPicker:n.any,children:n.any,className:n.string,clockViewModel:n.any,containerProps:n.object,contextOptions:n.any,creditContainer:n.any,creditViewport:n.any,dataSources:n.any,full:n.bool,fullscreenButton:n.any,fullscreenElement:n.any,geocoder:n.any,globe:n.any,homeButton:n.any,id:n.string,imageryProvider:n.any,imageryProviderViewModels:n.any,infoBox:n.any,mapMode2D:n.any,mapProjection:n.any,navigationHelpButton:n.any,navigationInstructionsInitiallyVisible:n.any,onSelectedEntityChanged:n.func,onTrackedEntityChanged:n.func,orderIndependentTranslucency:n.any,projectionPicker:n.any,scene3DOnly:n.any,sceneMode:n.any,sceneModePicker:n.any,selectedImageryProviderViewModel:n.any,selectedTerrainProviderViewModel:n.any,selectionIndicator:n.any,shadows:n.any,showRenderLoopErrors:n.any,skyAtmosphere:n.any,skyBox:n.any,style:n.object,targetFrameRate:n.any,terrainExaggeration:n.any,terrainProvider:n.any,terrainProviderViewModels:n.any,terrainShadows:n.any,timeline:n.any,useDefaultRenderLoop:n.any,vrButton:n.any}),x.defaultProps={style:{}},x.childContextTypes={cesiumWidget:p,scene:h,viewer:f},x.cesiumProps=["animation","baseLayerPicker","fullscreenButton","vrButton","geocoder","homeButton","infoBox","sceneModePicker","selectionIndicator","timeline","navigationHelpButton","navigationInstructionsInitiallyVisible","scene3DOnly","clockViewModel","selectedImageryProviderViewModel","imageryProviderViewModels","selectedTerrainProviderViewModel","terrainProviderViewModels","imageryProvider","terrainProvider","skyBox","skyAtmosphere","fullscreenElement","useDefaultRenderLoop","targetFrameRate","showRenderLoopErrors","automaticallyTrackDataSourceClocks","contextOptions","sceneMode","mapProjection","globe","orderIndependentTranslucency","creditContainer","creditViewport","dataSources","terrainExaggeration","shadows","terrainShadows","mapMode2D","projectionPicker"],x.cesiumEvents=["selectedEntityChanged","trackedEntityChanged"],x.initCesiumComponentWhenComponentDidMount=!0,e.PropTypes=v,e.Entity=b,e.PointPrimitive=O,e.PointPrimitiveCollection=D,e.Primitive=T,e.Viewer=x,Object.defineProperty(e,"__esModule",{value:!0})});
