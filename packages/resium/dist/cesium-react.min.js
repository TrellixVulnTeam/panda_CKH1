!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("cesium"),require("prop-types"),require("react")):"function"==typeof define&&define.amd?define(["exports","cesium","prop-types","react"],e):e(t.CesiumReact={},t.Cesium,t.PropTypes,t.React)}(this,function(t,e,n,r){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r;function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t};"object"==typeof Reflect&&Reflect.construct;function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var c=n.instanceOf(e.Viewer),p=Object.freeze({viewerType:c}),a=function(t,e){Object.entries(e).forEach(function(e){var n=e[0],r=e[1];"function"==typeof r&&t[n].addEventListener(r)})},f=function(t,e){Object.entries(e).forEach(function(e){var n=e[0],r=e[1];"function"==typeof r&&t[n].removeEventListener(r)})},l=/^on([A-Z])/,h=function(t,e){return Object.keys(e).reduce(function(n,r){if(!l.test(r)||"function"!=typeof e[r])return n;var o=r.replace(l,function(t,e){return e.toLowerCase()});return t.indexOf(o)>=0&&(n[o]=e[r]),n},{})},d=function(t){i(e,t);function e(){for(var e,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=n=t.call.apply(t,[this].concat(o))||this,n.target=null,e||u(n)}var n=e.prototype;return n.componentDidMount=function(){if(this.onMount){var t=this.props,e=this.getProps().reduce(function(e,n){var r;return void 0===t[n]?e:o({},e,((r={})[n]=t[n],r))},{}),n=this.onMount(e,this.props,this.context);n&&(this.target=n,a(n,h(this.getEvents(),this.props)))}},n.componentDidUpdate=function(t){var e=this.target;if(e){var n=this.getEvents();!function(t,e,n){var r=Object.keys(e),o=Object.keys(n),i=r.map(function(t){return[t,e[t]]}).reduce(function(t,e){var r=e[0],i=e[1];return-1!==o.indexOf(r)&&i===n[r]&&"function"==typeof i||(t[r]=i),t},{}),s=o.map(function(t){return[t,n[t]]}).reduce(function(t,n){var o=n[0],i=n[1];return-1!==r.indexOf(o)&&i===e[o]||"function"!=typeof i||(t[o]=i),t},{});f(t,i),a(t,s)}(e,h(n,t),h(n,this.props))}var r=this.props;this.getProps().forEach(function(n){t[n]!==r[n]&&(e[n]=r[n])}),this.onUpdate&&this.onUpdate(e,r,t,this.context)},n.componentWillUnmount=function(){var t=this.target;t&&f(t,h(this.getEvents(),this.props)),this.onUnmount&&this.onUnmount(t,this.props,this.context),this.target=null},n.getEvents=function(){return this.constructor.cesiumEvents||[]},n.getProps=function(){return this.constructor.cesiumProps||[]},n.getTarget=function(){return this.target},n.render=function(){return null},e}(r.PureComponent),y=function(t){i(n,t);function n(){for(var e,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=n=t.call.apply(t,[this].concat(o))||this,n.element=null,e||u(n)}var s=n.prototype;return s.getChildContext=function(){return{viewer:this.getTarget()}},s.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.forceUpdate()},s.onMount=function(){return new e.Viewer(this.element,{})},s.onUnmount=function(){this.getTarget().destroy(),this.element=null},s.render=function(){var t=this,e=this.getTarget(),n=this.props,i=n.children,s=n.className,u=n.full,c=n.style;return r.createElement("div",{className:s,ref:function(e){t.element=e},style:o({},u?{position:"absolute",bottom:"0",left:"0",right:"0",top:"0"}:{},c)},e?i:null)},n}(d);y.propTypes={children:n.any,className:n.string,full:n.bool,onSelectedEntityChanged:n.func,style:n.object},y.defaultProps={style:{}},y.childContextTypes={viewer:c},y.cesiumProps=[],y.cesiumEvents=["selectedEntityChanged"];var v=function(t){i(n,t);function n(){return t.apply(this,arguments)||this}var r=n.prototype;return r.onMount=function(t,n,r){var i=r.viewer,s=new e.Entity(o({},t,{point:{pixelSize:10}}));return i.entities.add(s),s},r.onUnmount=function(t,e,n){var r=n.viewer;r&&!r.isDestroyed()&&r.entities.remove(t)},n}(d);v.propTypes={description:n.string,id:n.string,name:n.string,position:n.object},v.contextTypes={viewer:c},v.cesiumProps=["id","name","position","description"],v.cesiumEvents=[],t.PropTypes=p,t.Viewer=y,t.Entity=v,Object.defineProperty(t,"__esModule",{value:!0})});
